<ng-template #circle>
  <svg
    [attr.viewBox]="_viewBox()"
    class="et-circular-progress__indeterminate-circle-graphic"
    xmlns="http://www.w3.org/2000/svg"
    focusable="false"
  >
    <circle
      [attr.r]="_circleRadius()"
      [style.stroke-dasharray.px]="_strokeCircumference()"
      [style.stroke-dashoffset.px]="_strokeCircumference() / 2"
      [style.stroke-width.%]="_circleStrokeWidth()"
      cx="50%"
      cy="50%"
    />
  </svg>
</ng-template>

<ng-template #spinner>
  <div class="et-circular-progress__circle-clipper et-circular-progress__circle-left">
    <ng-container [ngTemplateOutlet]="circle" />
  </div>
  <div class="et-circular-progress__gap-patch">
    <ng-container [ngTemplateOutlet]="circle" />
  </div>
  <div class="et-circular-progress__circle-clipper et-circular-progress__circle-right">
    <ng-container [ngTemplateOutlet]="circle" />
  </div>
</ng-template>

@if (renderBackground()) {
  <div class="et-circular-progress__background-container" aria-hidden="true">
    <svg
      [attr.viewBox]="_viewBox()"
      class="et-circular-progress__background-circle-graphic"
      xmlns="http://www.w3.org/2000/svg"
      focusable="false"
    >
      <circle
        [attr.r]="_circleRadius()"
        [style.stroke-dasharray.px]="_strokeCircumference()"
        [style.stroke-dashoffset.px]="_bgStrokeDashOffset()"
        [style.stroke-width.%]="_circleStrokeWidth()"
        class="et-circular-progress__background-circle"
        cx="50%"
        cy="50%"
      />
    </svg>
  </div>
}

<div class="et-circular-progress__determinate-container" aria-hidden="true">
  <svg
    [attr.viewBox]="_viewBox()"
    class="et-circular-progress__determinate-circle-graphic"
    xmlns="http://www.w3.org/2000/svg"
    focusable="false"
  >
    <circle
      [attr.r]="_circleRadius()"
      [style.stroke-dasharray.px]="_strokeCircumference()"
      [style.stroke-dashoffset.px]="_strokeDashOffset()"
      [style.stroke-width.%]="_circleStrokeWidth()"
      class="et-circular-progress__determinate-circle"
      cx="50%"
      cy="50%"
    />
  </svg>
</div>

<div class="et-circular-progress__indeterminate-container" aria-hidden="true">
  <div [class.et-circular-progress__color-1]="multiColor()" class="et-circular-progress__spinner-layer">
    <ng-container [ngTemplateOutlet]="spinner" />
  </div>

  <div class="et-circular-progress__spinner-layer et-circular-progress__color-2">
    <ng-container [ngTemplateOutlet]="spinner" />
  </div>

  <div class="et-circular-progress__spinner-layer et-circular-progress__color-3">
    <ng-container [ngTemplateOutlet]="spinner" />
  </div>

  <div class="et-circular-progress__spinner-layer et-circular-progress__color-4">
    <ng-container [ngTemplateOutlet]="spinner" />
  </div>
</div>
