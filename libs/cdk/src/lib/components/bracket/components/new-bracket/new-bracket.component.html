@if (bracketGrid(); as grid) {
  <section
    [style.width.px]="grid.raw.grid.dimensions.width"
    [style.height.px]="grid.raw.grid.dimensions.height"
    class="et-bracket-new et-bracket-new--{{ bracketData().mode }}"
  >
    <svg [innerHTML]="svgContent()" class="et-bracket-new-svg" xmlns="http://www.w3.org/2000/svg" />

    @for (round of grid.columns; track $index) {
      <ul
        [style.width.px]="round.dimensions.width"
        [style.height.px]="round.dimensions.height"
        [style.top.px]="round.dimensions.top"
        [style.left.px]="round.dimensions.left"
        class="et-bracket-new-round"
      >
        @for (element of round.elements; track $index) {
          @let inputs =
            element.type === 'header'
              ? { bracketRound: element.round, bracketRoundSwissGroup: element.roundSwissGroup }
              : {
                  bracketRound: element.round,
                  bracketMatch: element.match,
                  bracketRoundSwissGroup: element.roundSwissGroup,
                };

          @let highlightClass = element.type === 'header' ? '' : element.classes;

          <li
            [style.width.px]="element.dimensions.width"
            [style.height.px]="element.dimensions.height"
            [style.top.px]="element.dimensions.top - round.dimensions.top"
            [style.left.px]="element.dimensions.left - round.dimensions.left"
            class="et-bracket-new-element et-bracket-new-element--{{ element.type }} {{ highlightClass }}"
          >
            <ng-container *ngComponentOutlet="element.component; inputs: inputs" />
          </li>
        }
      </ul>
    }
  </section>
}
