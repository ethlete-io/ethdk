<!-- <section
  [style.--_cw.px]="columnWidth()"
  [style.--_mh.px]="matchHeight()"
  [style.--_rhh.px]="hideRoundHeaders() ? matchHeight() : roundHeaderHeight()"
  [style.--_cg.px]="columnGap()"
  [style.--_ulg.px]="upperLowerGap()"
  [style.--_rg.px]="rowGap()"
  [style.--_bcc]="definitions().columnCount"
  [style.--_brc]="definitions().rowCount"
  class="et-bracket-new"
>
  <svg [innerHTML]="svgContent()" class="et-bracket-new-svg" xmlns="http://www.w3.org/2000/svg" />

  @for (round of items().values(); track round.layoutId) {
    <ul
      [style.--_c]="round.columnStart + ' / ' + round.columnEnd"
      [style.--_r]="round.rowStart + ' / ' + round.rowEnd"
      [style.--_cd]="round.columnDefinitions"
      [style.--_rd]="round.rowDefinitions"
      class="et-bracket-new-round"
    >
      @for (item of round.items.values(); track item.layoutId) {
        <li [style.--_r]="item.rowStart + ' / ' + item.rowEnd" [class]="item.className">
          <ng-container *ngComponentOutlet="item.component; inputs: item.data" />

          @if (debug() && item.type === 'match') {
            @let debugData = drawManData().debugMap[item.id];

            @if (debugData) {
              <et-new-bracket-debug [drawManDebugData]="debugData" />
            }
          }
          <div></div>
        </li>
      }
    </ul>
  }
</section> -->

@if (newDefinitions(); as gridDefs) {
  <section
    [style.width.px]="gridDefs.grid.raw.grid.dimensions.width"
    [style.height.px]="gridDefs.grid.raw.grid.dimensions.height"
    class="et-bracket-new"
  >
    <svg [innerHTML]="svgContent()" class="et-bracket-new-svg" xmlns="http://www.w3.org/2000/svg" />

    @for (round of gridDefs.grid.grid; track $index) {
      <ul
        [style.width.px]="round.dimensions.width"
        [style.height.px]="round.dimensions.height"
        [style.top.px]="round.dimensions.top"
        [style.left.px]="round.dimensions.left"
        class="et-bracket-new-round"
      >
        @for (element of round.elements; track $index) {
          @let inputs =
            element.type === 'header'
              ? { bracketRound: element.round }
              : { bracketRound: element.round, bracketMatch: element.match };

          @let highlightClass =
            element.type === 'header' ? '' : `${element.match.home?.shortId} ${element.match.away?.shortId}`;

          <li
            [style.width.px]="element.dimensions.width"
            [style.height.px]="element.dimensions.height"
            [style.top.px]="element.dimensions.top - round.dimensions.top"
            [style.left.px]="element.dimensions.left - round.dimensions.left"
            class="et-bracket-new-element et-bracket-new-element--{{ element.type }} {{ highlightClass }}"
          >
            <ng-container *ngComponentOutlet="element.component; inputs: inputs" />
          </li>
        }
      </ul>
    }
  </section>
}
